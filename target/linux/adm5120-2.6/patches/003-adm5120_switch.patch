Index: linux-2.6.21.1/drivers/net/Kconfig
===================================================================
--- linux-2.6.21.1.orig/drivers/net/Kconfig
+++ linux-2.6.21.1/drivers/net/Kconfig
@@ -574,6 +574,10 @@ config MIPS_AU1X00_ENET
 	  If you have an Alchemy Semi AU1X00 based system
 	  say Y.  Otherwise, say N.
 
+config MIPS_ADM5120_ENET
+	tristate "MIPS ADM5120 Ethernet switch support"
+	depends on NET_ETHERNET && MIPS_ADM5120
+
 config NET_SB1250_MAC
 	tristate "SB1250 Ethernet support"
 	depends on NET_ETHERNET && SIBYTE_SB1xxx_SOC
Index: linux-2.6.21.1/drivers/net/Makefile
===================================================================
--- linux-2.6.21.1.orig/drivers/net/Makefile
+++ linux-2.6.21.1/drivers/net/Makefile
@@ -165,6 +165,7 @@ obj-$(CONFIG_SC92031) += sc92031.o
 # This is also a 82596 and should probably be merged
 obj-$(CONFIG_LP486E) += lp486e.o
 
+obj-$(CONFIG_MIPS_ADM5120_ENET) += adm5120sw.o
 obj-$(CONFIG_ETH16I) += eth16i.o
 obj-$(CONFIG_ZORRO8390) += zorro8390.o
 obj-$(CONFIG_HPLANCE) += hplance.o 7990.o
