Index: linux-2.4.35.4/fs/squashfs/Makefile
===================================================================
--- linux-2.4.35.4.orig/fs/squashfs/Makefile	2007-12-15 05:19:49.031215169 +0100
+++ linux-2.4.35.4/fs/squashfs/Makefile	2007-12-15 05:19:50.759313646 +0100
@@ -4,7 +4,7 @@
 
 O_TARGET := squashfs.o
 
-obj-y  := inode.o squashfs2_0.o LzmaDecode.o
+obj-y  := inode.o LzmaDecode.o
 
 obj-m := $(O_TARGET)
 
Index: linux-2.4.35.4/fs/squashfs/squashfs.h
===================================================================
--- linux-2.4.35.4.orig/fs/squashfs/squashfs.h	2007-12-15 05:19:48.659193968 +0100
+++ linux-2.4.35.4/fs/squashfs/squashfs.h	2007-12-15 05:19:50.767314102 +0100
@@ -24,6 +24,9 @@
 #ifdef CONFIG_SQUASHFS_1_0_COMPATIBILITY
 #undef CONFIG_SQUASHFS_1_0_COMPATIBILITY
 #endif
+#ifdef CONFIG_SQUASHFS_2_0_COMPATIBILITY
+#undef CONFIG_SQUASHFS_2_0_COMPATIBILITY
+#endif
 #ifdef SQUASHFS_TRACE
 #define TRACE(s, args...)	printk(KERN_NOTICE "SQUASHFS: "s, ## args)
 #else
