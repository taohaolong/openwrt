Index: linux-2.4.35.4/arch/mips/Makefile
===================================================================
--- linux-2.4.35.4.orig/arch/mips/Makefile	2007-12-15 05:19:50.987326639 +0100
+++ linux-2.4.35.4/arch/mips/Makefile	2007-12-15 05:19:51.215339635 +0100
@@ -739,6 +739,7 @@
 HEAD := arch/mips/kernel/head.o arch/mips/kernel/init_task.o
 
 SUBDIRS := $(addprefix arch/mips/, tools) $(SUBDIRS) $(addprefix arch/mips/, kernel mm lib)
+$(SUBDIRS): $(TOPDIR)/include/asm-$(ARCH)/offset.h
 CORE_FILES := arch/mips/kernel/kernel.o arch/mips/mm/mm.o $(CORE_FILES)
 LIBS := arch/mips/lib/lib.a $(LIBS)
 
@@ -785,7 +786,7 @@
 	$(MAKE) -C arch/$(ARCH)/tools mrproper
 
 archdep:
-	if [ ! -f $(TOPDIR)/include/asm-$(ARCH)/offset.h ]; then \
-		touch $(TOPDIR)/include/asm-$(ARCH)/offset.h; \
-	fi;
 	@$(MAKEBOOT) dep
+
+$(TOPDIR)/include/asm-$(ARCH)/offset.h:
+	@$(MAKE) -C arch/mips/tools
