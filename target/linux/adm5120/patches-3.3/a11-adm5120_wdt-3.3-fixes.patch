--- a/drivers/watchdog/adm5120_wdt.c
+++ b/drivers/watchdog/adm5120_wdt.c
@@ -123,8 +123,7 @@ static ssize_t wdt_write(struct file *fi
 	return 0;
 }
 
-static int wdt_ioctl(struct inode *inode, struct file *file,
-	unsigned int cmd, unsigned long arg)
+static long wdt_ioctl(struct file *file, unsigned int cmd, unsigned long arg)
 {
 	int new_timeout;
 	static struct watchdog_info ident = {
@@ -166,7 +165,7 @@ static const struct file_operations wdt_
 	.owner		= THIS_MODULE,
 	.llseek		= no_llseek,
 	.write		= wdt_write,
-	.ioctl		= wdt_ioctl,
+	.unlocked_ioctl	= wdt_ioctl,
 	.open		= wdt_open,
 	.release	= wdt_release,
 };
