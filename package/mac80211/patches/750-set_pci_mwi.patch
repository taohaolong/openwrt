Index: compat-wireless-2010-06-10/drivers/net/wireless/rt2x00/rt2x00pci.c
===================================================================
--- compat-wireless-2010-06-10.orig/drivers/net/wireless/rt2x00/rt2x00pci.c	2010-06-20 15:01:59.000000000 +0200
+++ compat-wireless-2010-06-10/drivers/net/wireless/rt2x00/rt2x00pci.c	2010-06-20 15:02:32.000000000 +0200
@@ -327,8 +327,10 @@
 
 	pci_set_master(pci_dev);
 
+#ifdef CONFIG_PCI_SET_MWI
 	if (pci_set_mwi(pci_dev))
 		ERROR_PROBE("MWI not available.\n");
+#endif
 
 	if (dma_set_mask(&pci_dev->dev, DMA_BIT_MASK(32))) {
 		ERROR_PROBE("PCI DMA not supported.\n");

