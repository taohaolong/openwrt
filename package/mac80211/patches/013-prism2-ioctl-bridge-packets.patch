---
 net/mac80211/ieee80211_ioctl.c |    6 ++++++
 1 file changed, 6 insertions(+)

--- everything.orig/net/mac80211/ieee80211_ioctl.c	2007-11-07 13:19:27.981515569 +0100
+++ everything/net/mac80211/ieee80211_ioctl.c	2007-11-07 13:19:30.781513182 +0100
@@ -882,6 +882,9 @@ static int ieee80211_ioctl_prism2_param(
 	local = sdata->local;
 
 	switch (param) {
+	case PRISM2_PARAM_AP_BRIDGE_PACKETS:
+		local->bridge_packets = value;
+		break;
 	case PRISM2_PARAM_MGMT_IF:
 		if (value == 1) {
 			if (!local->apdev)
@@ -914,6 +917,9 @@ static int ieee80211_ioctl_get_prism2_pa
 	local = sdata->local;
 
 	switch (*param) {
+	case PRISM2_PARAM_AP_BRIDGE_PACKETS:
+		*param = local->bridge_packets;
+		break;
 	case PRISM2_PARAM_MGMT_IF:
 		if (local->apdev)
 			*param = local->apdev->ifindex;
