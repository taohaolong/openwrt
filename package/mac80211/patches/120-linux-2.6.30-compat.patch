--- a/net/wireless/nl80211.c
+++ b/net/wireless/nl80211.c
@@ -5662,7 +5662,11 @@ int nl80211_send_action(struct cfg80211_
 		return err;
 	}
 
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,32))
 	err = genlmsg_unicast(wiphy_net(&rdev->wiphy), msg, nlpid);
+#else
+	err = genlmsg_unicast(msg, nlpid);
+#endif
 	if (err < 0)
 		return err;
 	return 0;
