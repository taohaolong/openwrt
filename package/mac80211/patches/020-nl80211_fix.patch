--- a/compat/compat-2.6.37.c
+++ b/compat/compat-2.6.37.c
@@ -130,7 +130,8 @@ int compat_genl_register_family_with_ops
 		__copy(dumpit);
 		__copy(done);
 #undef __copy
-		ops[i].ops.doit = nl_doit_wrapper;
+		if (ops[i].doit)
+			ops[i].ops.doit = nl_doit_wrapper;
 		ret = genl_register_ops(&family->family, &ops[i].ops);
 		if (ret < 0)
 			goto error_ops;
