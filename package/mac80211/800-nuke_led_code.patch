--- a/config.mk
+++ b/config.mk
@@ -115,7 +115,7 @@ CONFIG_COMPAT_MAC80211_RC_DEFAULT=minstr
 # CONFIG_MAC80211_RC_PID=y
 CONFIG_MAC80211_RC_MINSTREL=y
 CONFIG_MAC80211_RC_MINSTREL_HT=y
-CONFIG_MAC80211_LEDS=y
+# CONFIG_MAC80211_LEDS=y
 
 # enable mesh networking too
 CONFIG_MAC80211_MESH=y
@@ -194,7 +194,7 @@ CONFIG_B43_PCI_AUTOSELECT=y
 ifneq ($(CONFIG_PCMCIA),)
 # CONFIG_B43_PCMCIA=y
 endif
-CONFIG_B43_LEDS=y
+# CONFIG_B43_LEDS=y
 CONFIG_B43_PHY_LP=y
 # CONFIG_B43_NPHY is not set
 # CONFIG_B43_FORCE_PIO=y
@@ -203,7 +203,7 @@ CONFIG_B43_PHY_LP=y
 CONFIG_B43LEGACY=m
 CONFIG_B43LEGACY_HWRNG=y
 CONFIG_B43LEGACY_PCI_AUTOSELECT=y
-CONFIG_B43LEGACY_LEDS=y
+# CONFIG_B43LEGACY_LEDS=y
 # CONFIG_B43LEGACY_DEBUG=y
 CONFIG_B43LEGACY_DMA=y
 CONFIG_B43LEGACY_PIO=y
@@ -336,13 +336,13 @@ endif
 
 CONFIG_P54_USB=m
 CONFIG_RTL8187=m
-CONFIG_RTL8187_LEDS=y
+# CONFIG_RTL8187_LEDS=y
 
 CONFIG_AT76C50X_USB=m
 
 ifndef CONFIG_COMPAT_KERNEL_28
 CONFIG_AR9170_USB=m
-CONFIG_AR9170_LEDS=y
+# CONFIG_AR9170_LEDS=y
 endif
 
 CONFIG_ATH9K_HTC=m
@@ -426,7 +426,7 @@ CONFIG_RT2800_LIB=m
 CONFIG_RT2X00_LIB_HT=y
 CONFIG_RT2X00_LIB_FIRMWARE=y
 CONFIG_RT2X00_LIB_CRYPTO=y
-CONFIG_RT2X00_LIB_LEDS=y
+# CONFIG_RT2X00_LIB_LEDS=y
 # CONFIG_RT2X00_DEBUG=y
 # CONFIG_RT2X00_LIB_DEBUGFS
 endif
@@ -437,7 +437,7 @@ endif
 
 # p54
 CONFIG_P54_COMMON=m
-CONFIG_P54_LEDS=y
+# CONFIG_P54_LEDS=y
 
 # Atheros
 CONFIG_ATH_COMMON=m
--- a/include/linux/compat-2.6.25.h
+++ b/include/linux/compat-2.6.25.h
@@ -146,10 +146,12 @@ static inline void __hwrng_unregister(st
 	hwrng_unregister(rng);
 }
 
+#ifdef CONFIG_MAC80211_LEDS
 static inline void led_classdev_unregister_suspended(struct led_classdev *lcd)
 {
 	led_classdev_unregister(lcd);
 }
+#endif
 
 /**
  * The following things are out of ./include/linux/kernel.h
