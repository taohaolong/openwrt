Index: madwifi-trunk-r3776/ath_rate/minstrel/minstrel.c
===================================================================
--- madwifi-trunk-r3776.orig/ath_rate/minstrel/minstrel.c	2008-07-17 00:35:59.000000000 +0200
+++ madwifi-trunk-r3776/ath_rate/minstrel/minstrel.c	2008-07-17 00:47:36.000000000 +0200
@@ -415,6 +415,9 @@
 			return;
 		}
 
+		if (sn->num_rates <= 0)
+			return;
+
 		if (sn->is_sampling) {
 			sn->is_sampling = 0;
 			if (sn->rs_sample_rate_slower)
