diff -urN madwifi-ng-refcount-r2313-20070505.old/net80211/ieee80211_wireless.c madwifi-ng-refcount-r2313-20070505.dev/net80211/ieee80211_wireless.c
--- madwifi-ng-refcount-r2313-20070505.old/net80211/ieee80211_wireless.c	2007-05-13 18:17:56.109039168 +0200
+++ madwifi-ng-refcount-r2313-20070505.dev/net80211/ieee80211_wireless.c	2007-05-13 18:17:56.795934744 +0200
@@ -3359,7 +3359,7 @@
 				if (ieee80211_sta_join(vap, lookup.se))
 					while (!vap->iv_nsdone)
 						IEEE80211_RESCHEDULE();
-				if (vap->iv_nsparams.result)
+				if (!vap->iv_nsparams.result)
 					return 0;
 			}
 		}
