Index: madwifi-ng-r2834-20071106/ath_rate/minstrel/minstrel.c
===================================================================
--- madwifi-ng-r2834-20071106.orig/ath_rate/minstrel/minstrel.c	2007-11-07 14:01:59.625349524 +0100
+++ madwifi-ng-r2834-20071106/ath_rate/minstrel/minstrel.c	2007-11-07 14:02:01.169437517 +0100
@@ -393,6 +393,9 @@
 		struct minstrel_node *sn = ATH_NODE_MINSTREL(an);
 		int rc1, rc2, rc3;         /* Index into the rate table, so for example, it is  0..11 */
 
+		if (sn->num_rates <= 0)
+			return;
+
 		if (sn->is_sampling) {
 			sn->is_sampling = 0;
 			if (sn->rs_sample_rate_slower)
